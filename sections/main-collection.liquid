{% paginate collection.products by 48 %}
<div class="collection-layout-wrapper">
  
  <aside class="collection-sidebar">
    <div class="filter-group">
      <h4>Categories</h4>
      <ul>
        {% for coll in collections %}
          <li><a href="{{ coll.url }}" class="filter-link">{{ coll.title }}</a></li>
        {% endfor %}
      </ul>
    </div>

    <div class="filter-group">
      <h4>Brands</h4>
      {% for product_vendor in collection.all_vendors %}
        <a href="{{ collection.url }}?filter.p.vendor={{ product_vendor | url_param_escape }}" class="filter-link">
          {{ product_vendor }}
        </a>
      {% endfor %}
    </div>
  </aside>

  <main class="collection-main">
    <h1 class="collection-title">{{ collection.title }}</h1>
    
    <div class="studio-grid">
      {% for product in collection.products %}
        {% render 'product-card', product: product %}
      {% else %}
        <p>No products found in this collection.</p>
      {% endfor %}
    </div>

    {% if paginate.pages > 1 %}
      <div class="pagination">{{ paginate | default_pagination }}</div>
    {% endif %}
  </main>

</div>

<style>
  /* Layout Architecture */
  .collection-layout-wrapper { display: flex; gap: 40px; max-width: 1400px; margin: 40px auto; padding: 0 20px; }
  .collection-sidebar { flex: 0 0 220px; border-right: 1px solid #eee; padding-right: 20px; }
  .collection-main { flex: 1; }
  .collection-title { font-size: 1.5rem; margin-bottom: 30px; font-weight: 300; text-transform: uppercase; letter-spacing: 2px; }
  
  /* The Grid */
  .studio-grid { display: grid; grid-template-columns: repeat(4, 1fr); gap: 25px; }

  /* Product Card Styles (Must be here to style the snippet) */
  .studio-product-card { position: relative; text-decoration: none; color: inherit; display: block; }
  .image-frame { 
    height: 280px; 
    background: #f9f9f9; 
    display: flex; 
    align-items: center; 
    justify-content: center; 
    overflow: hidden; 
    margin-bottom: 12px;
    border: 1px solid #f0f0f0;
    position: relative;
  }
  .grid-img { max-height: 85%; max-width: 85%; object-fit: contain; transition: transform 0.4s ease; }
  
  .brand-name { font-size: 10px; color: #999; text-transform: uppercase; letter-spacing: 1px; margin: 0; }
  .product-title { font-size: 13px; margin: 5px 0; font-weight: 400; line-height: 1.4; height: 2.8em; overflow: hidden; }
  .product-price { font-weight: 600; font-size: 14px; margin-top: 8px; }

  /* Quick Add Button - Now Always Visible */
  .quick-add-btn {
    position: absolute;
    bottom: 10px;
    left: 50%;
    transform: translateX(-50%) translateY(0); /* Sitting in final position */
    background: #800000 (0, 0, 0, 0.8); /* Slightly transparent Marron for a studio feel */
    color: #fff;
    border: none;
    padding: 8px 15px;
    font-size: 11px;
    text-transform: uppercase;
    letter-spacing: 1px;
    cursor: pointer;
    opacity: 1; /* Always visible */
    transition: background 0.3s ease;
    width: 80%; /* Makes it a nice wide target for thumbs on mobile */
    white-space: nowrap;
  }

  /* Optional: Make it turn solid Maroon when hovered on desktop */
  .quick-add-btn:hover {
    background: #800000 (0, 0, 0, 1);
  }

  /* Keep the image zoom on hover for desktop */
  .studio-product-card:hover .grid-img { 
    transform: scale(1.05); 
  }

  /* Sidebar Links */
  .filter-group { margin-bottom: 30px; }
  .filter-group h4 { font-size: 12px; text-transform: uppercase; letter-spacing: 1px; margin-bottom: 15px; color: #000; border-bottom: 1px solid #eee; padding-bottom: 5px; }
  .filter-link { display: block; font-size: 13px; color: #666; text-decoration: none; margin-bottom: 8px; }
  .filter-link:hover { color: #000; }

  @media (max-width: 1100px) { .studio-grid { grid-template-columns: repeat(3, 1fr); } }
  @media (max-width: 768px) { 
    .collection-layout-wrapper { flex-direction: column; }
    .collection-sidebar { display: none; }
    .studio-grid { grid-template-columns: repeat(2, 1fr); }
  }
</style>
{% endpaginate %}